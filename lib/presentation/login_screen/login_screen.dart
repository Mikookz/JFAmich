import 'bloc/login_bloc.dart';import 'models/login_model.dart';import 'package:flutter/material.dart';import 'package:zonar_marketing__grapichs/core/app_export.dart';import 'package:zonar_marketing__grapichs/widgets/custom_button.dart';import 'package:zonar_marketing__grapichs/widgets/custom_text_form_field.dart';import 'package:fluttertoast/fluttertoast.dart';import 'package:zonar_marketing__grapichs/domain/googleauth/google_auth_helper.dart';import 'package:zonar_marketing__grapichs/domain/facebookauth/facebook_auth_helper.dart';class LoginScreen extends StatelessWidget {static Widget builder(BuildContext context) { return BlocProvider<LoginBloc>(create: (context) => LoginBloc(LoginState(loginModelObj: LoginModel()))..add(LoginInitialEvent()), child: LoginScreen()); } 
@override Widget build(BuildContext context) { return SafeArea(child: Scaffold(backgroundColor: ColorConstant.black900, resizeToAvoidBottomInset: false, body: Container(width: double.maxFinite, padding: getPadding(left: 16, top: 60, right: 16), child: Column(mainAxisAlignment: MainAxisAlignment.start, children: [Text("lbl_login".tr, overflow: TextOverflow.ellipsis, textAlign: TextAlign.left, style: AppStyle.txtPoppinsMedium24), BlocSelector<LoginBloc, LoginState, TextEditingController?>(selector: (state) => state.emailaddressController, builder: (context, emailaddressController) {return CustomTextFormField(focusNode: FocusNode(), controller: emailaddressController, hintText: "lbl_email_address".tr, margin: getMargin(top: 45), textInputType: TextInputType.emailAddress);}), BlocBuilder<LoginBloc, LoginState>(builder: (context, state) {return CustomTextFormField(focusNode: FocusNode(), controller: state.passwordController, hintText: "lbl_password".tr, margin: getMargin(top: 31), textInputAction: TextInputAction.done, textInputType: TextInputType.visiblePassword, suffix: InkWell(onTap: () {context.read<LoginBloc>().add(ChangePasswordVisibilityEvent(value: !state.isShowPassword));}, child: Container(margin: getMargin(left: 30, right: 19, bottom: 18), child: CustomImageView(svgPath: state.isShowPassword ? ImageConstant.imgEye : ImageConstant.imgEye))), suffixConstraints: BoxConstraints(maxHeight: getVerticalSize(42)), isObscureText: state.isShowPassword);}), Align(alignment: Alignment.centerRight, child: GestureDetector(onTap: () {onTapTxtForgotPassword(context);}, child: Padding(padding: getPadding(top: 24), child: Text("msg_forgot_password".tr, overflow: TextOverflow.ellipsis, textAlign: TextAlign.left, style: AppStyle.txtPoppinsMedium14)))), CustomButton(height: getVerticalSize(50), text: "lbl_login".tr, margin: getMargin(top: 22), fontStyle: ButtonFontStyle.PoppinsMedium16WhiteA700, onTap: () {onTapLoginOne(context);}), Padding(padding: getPadding(left: 19, top: 32, right: 18), child: Row(mainAxisAlignment: MainAxisAlignment.center, crossAxisAlignment: CrossAxisAlignment.start, children: [Padding(padding: getPadding(top: 8, bottom: 9), child: SizedBox(width: getHorizontalSize(132), child: Divider(height: getVerticalSize(1), thickness: getVerticalSize(1), color: ColorConstant.whiteA7006c))), Padding(padding: getPadding(left: 14), child: Text("lbl_or".tr, overflow: TextOverflow.ellipsis, textAlign: TextAlign.left, style: AppStyle.txtPoppinsRegular12)), Padding(padding: getPadding(top: 8, bottom: 9), child: SizedBox(width: getHorizontalSize(146), child: Divider(height: getVerticalSize(1), thickness: getVerticalSize(1), color: ColorConstant.whiteA7006c, indent: getHorizontalSize(14))))])), Padding(padding: getPadding(top: 31), child: Row(mainAxisAlignment: MainAxisAlignment.spaceBetween, children: [GestureDetector(onTap: () {onTapRowgoogletwo(context);}, child: Container(padding: getPadding(left: 43, top: 12, right: 43, bottom: 12), decoration: AppDecoration.fillWhiteA70063.copyWith(borderRadius: BorderRadiusStyle.circleBorder25), child: Row(mainAxisAlignment: MainAxisAlignment.center, crossAxisAlignment: CrossAxisAlignment.start, children: [CustomImageView(imagePath: ImageConstant.imgGoogle2, height: getSize(25), width: getSize(25), margin: getMargin(bottom: 1)), Padding(padding: getPadding(left: 10, top: 4, bottom: 3), child: Text("lbl_google".tr, overflow: TextOverflow.ellipsis, textAlign: TextAlign.left, style: AppStyle.txtPoppinsRegular12WhiteA700))]))), GestureDetector(onTap: () {onTapRowfacebookeleven(context);}, child: Container(padding: getPadding(left: 35, top: 11, right: 35, bottom: 11), decoration: AppDecoration.fillWhiteA70063.copyWith(borderRadius: BorderRadiusStyle.circleBorder25), child: Row(mainAxisAlignment: MainAxisAlignment.center, crossAxisAlignment: CrossAxisAlignment.start, children: [CustomImageView(imagePath: ImageConstant.imgFacebook11, height: getSize(27), width: getSize(27), margin: getMargin(bottom: 1)), Padding(padding: getPadding(left: 10, top: 4, bottom: 5), child: Text("lbl_facebook".tr, overflow: TextOverflow.ellipsis, textAlign: TextAlign.left, style: AppStyle.txtPoppinsRegular12WhiteA700))])))])), Padding(padding: getPadding(left: 31, top: 49, right: 31, bottom: 5), child: Row(mainAxisAlignment: MainAxisAlignment.center, children: [Text("msg_do_you_already2".tr, overflow: TextOverflow.ellipsis, textAlign: TextAlign.left, style: AppStyle.txtPoppinsRegular12Bluegray100a2), GestureDetector(onTap: () {onTapTxtSignupnow(context);}, child: Padding(padding: getPadding(left: 4), child: Text("lbl_sign_up_now".tr, overflow: TextOverflow.ellipsis, textAlign: TextAlign.left, style: AppStyle.txtPoppinsMedium12.copyWith(decoration: TextDecoration.underline))))]))])))); } 
onTapTxtForgotPassword(BuildContext context) { NavigatorService.pushNamed(AppRoutes.forgotPasswordScreen, ); } 
onTapLoginOne(BuildContext context) { context.read<LoginBloc>().add(CreateLoginEvent(onCreateLoginEventSuccess: () {

_onCreateLoginEventSuccess(context);
},onCreateLoginEventError: () {

_onCreateLoginEventError(context);
},),);
 } 
void _onCreateLoginEventSuccess(BuildContext context) { NavigatorService.pushNamedAndRemoveUntil(AppRoutes.homeContainerScreen, arguments: {NavigationArgs.id: context.read<LoginBloc>().postLoginResp.data!.id!}); } 
void _onCreateLoginEventError(BuildContext context) { 
Fluttertoast.showToast(msg: "Invalid username or password!",); } 
onTapRowgoogletwo(BuildContext context) async  {         await GoogleAuthHelper().googleSignInProcess().then((googleUser) {
          if(googleUser!=null){
            //TODO Actions to be performed after signin
          } else {
            ScaffoldMessenger.of(context).showSnackBar(SnackBar(content: Text('user data is empty')));
          }
        }).catchError((onError) {
            ScaffoldMessenger.of(context).showSnackBar(SnackBar(content: Text(onError.toString())));
        });
         } 
onTapRowfacebookeleven(BuildContext context) async  {             await FacebookAuthHelper().facebookSignInProcess().then((facebookUser) {
              //TODO Actions to be performed after signin
              }).catchError((onError) {
              ScaffoldMessenger.of(context).showSnackBar(SnackBar(content: Text(onError.toString())));
            });
             } 
onTapTxtSignupnow(BuildContext context) { NavigatorService.pushNamed(AppRoutes.signUpScreen, ); } 
 }
